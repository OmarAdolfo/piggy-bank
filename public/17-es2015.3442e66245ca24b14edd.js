(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{Pvsk:function(t,s,o){"use strict";o.r(s);var a=o("PCNd"),n=o("tyNb"),e=o("fXoL"),c=o("qan5"),r=o("AytR"),i=o("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.url=r.a.url+"estadisticas"}getStats(){return this.http.get(this.url)}}return t.\u0275fac=function(s){return new(s||t)(e.Yb(i.b))},t.\u0275prov=e.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=o("ofXK"),b=o("I5S5");function h(t,s){if(1&t&&e.Pb(0,"p-chart",14),2&t){const t=e.ec();e.kc("data",t.data)("options",t.options)}}function p(t,s){1&t&&e.Hc(0," No existen pagos ni ingresos en el a\xf1o actual para generar estad\xedsticas ")}function u(t,s){if(1&t&&e.Pb(0,"p-chart",15),2&t){const t=e.ec();e.kc("data",t.data2)("options",t.options)}}function g(t,s){1&t&&e.Hc(0," No existen pagos ni ingresos para generar estad\xedsticas ")}function f(t,s){if(1&t&&e.Pb(0,"p-chart",15),2&t){const t=e.ec();e.kc("data",t.data3)("options",t.options)}}function v(t,s){1&t&&e.Hc(0," No existen gastos para generar estad\xedsticas ")}const m=[{path:"",component:(()=>{class t{constructor(t,s){this.monthService=t,this.statsService=s,this.colors=["#6D960E","#C9A452","#95280E","#7A15C6","#5DC25B","#599BA5","#6B552B"],this.colorIndex=0,this.options={responsive:!1,maintainAspectRatio:!1}}ngOnInit(){this.statsService.getStats().subscribe(t=>{this.calculateStatsByMonthAndYear(t.pagosmes,t.ingresosmes),this.data2=0!==t.ingresos&&0!==t.pagos?{labels:["Ganancias","Gastos"],datasets:[{data:[t.ingresos,t.pagos],backgroundColor:["#FF6384","#9CCC65"],hoverBackgroundColor:["#FF6384","#9CCC65"]}]}:null,this.calculateStatsExpenses(t.gastos)})}calculateStatsByMonthAndYear(t,s){if(t.length>0||s.length>0){const o=[],a=[];for(let n=1;n<=12;n++){const e=t.find(t=>t.mes===n);o.push(e?e.total:0);const c=s.find(t=>t.mes===n);a.push(c?c.total:0)}this.data={labels:this.monthService.getMonths().map(t=>t.name),datasets:[{label:"Gastos",backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:o},{label:"Ingresos",backgroundColor:"#9CCC65",borderColor:"#7CB342",data:a}]}}else this.data=null}calculateStatsExpenses(t){const s=[],o=[],a=[],n=[];for(let e of t){s.push(e.nombre),o.push(e.total);const t=this.getRandomColor();a.push(t),n.push(t)}this.data3={labels:s,datasets:[{data:o,backgroundColor:a,hoverBackgroundColor:n}]}}getRandomColor(){const t=this.colors[this.colorIndex];return this.colorIndex===this.colors.length-1?this.colorIndex=0:this.colorIndex++,t}}return t.\u0275fac=function(s){return new(s||t)(e.Ob(c.a),e.Ob(l))},t.\u0275cmp=e.Ib({type:t,selectors:[["app-stats"]],decls:32,vars:6,consts:[[1,"wrapper"],[1,"row"],[1,"col-12"],[1,"row","mt-3"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],["type","bar","width","300","height","300",3,"data","options",4,"ngIf","ngIfElse"],["noActualYear",""],[1,"col-12","col-xl-6"],["type","doughnut","width","300","height","300",3,"data","options",4,"ngIf","ngIfElse"],["noExpensesAndProfits",""],[1,"col-12","col-xl-6","mt-4","mt-xl-0"],["noExpenses",""],["type","bar","width","300","height","300",3,"data","options"],["type","doughnut","width","300","height","300",3,"data","options"]],template:function(t,s){if(1&t&&(e.Ub(0,"div",0),e.Ub(1,"div",1),e.Ub(2,"div",2),e.Ub(3,"h1"),e.Hc(4,"Estad\xedsticas"),e.Tb(),e.Tb(),e.Tb(),e.Pb(5,"hr"),e.Ub(6,"div",3),e.Ub(7,"div",2),e.Ub(8,"div",4),e.Ub(9,"div",5),e.Hc(10," Ingresos y pagos por mes del a\xf1o actual "),e.Tb(),e.Ub(11,"div",6),e.Fc(12,h,1,2,"p-chart",7),e.Fc(13,p,1,0,"ng-template",null,8,e.Gc),e.Tb(),e.Tb(),e.Tb(),e.Tb(),e.Ub(15,"div",3),e.Ub(16,"div",9),e.Ub(17,"div",4),e.Ub(18,"div",5),e.Hc(19," Ganancias/Gastos "),e.Tb(),e.Ub(20,"div",6),e.Fc(21,u,1,2,"p-chart",10),e.Fc(22,g,1,0,"ng-template",null,11,e.Gc),e.Tb(),e.Tb(),e.Tb(),e.Ub(24,"div",12),e.Ub(25,"div",4),e.Ub(26,"div",5),e.Hc(27," Gastos con mayor dinero invertido "),e.Tb(),e.Ub(28,"div",6),e.Fc(29,f,1,2,"p-chart",10),e.Fc(30,v,1,0,"ng-template",null,13,e.Gc),e.Tb(),e.Tb(),e.Tb(),e.Tb(),e.Tb()),2&t){const t=e.vc(14),o=e.vc(23),a=e.vc(31);e.Cb(12),e.kc("ngIf",s.data)("ngIfElse",t),e.Cb(9),e.kc("ngIf",s.data2)("ngIfElse",o),e.Cb(8),e.kc("ngIf",(null==s.data3?null:s.data3.labels.length)>0)("ngIfElse",a)}},directives:[d.k,b.b],styles:[""]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=e.Mb({type:t}),t.\u0275inj=e.Lb({factory:function(s){return new(s||t)},imports:[[n.e.forChild(m)],n.e]}),t})();o.d(s,"StatsModule",(function(){return I}));let I=(()=>{class t{}return t.\u0275mod=e.Mb({type:t}),t.\u0275inj=e.Lb({factory:function(s){return new(s||t)},imports:[[a.a,b.a,C]]}),t})()}}]);