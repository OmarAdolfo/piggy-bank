(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{Pvsk:function(t,s,o){"use strict";o.r(s);var a=o("PCNd"),e=o("tyNb"),n=o("fXoL"),r=o("qan5"),i=o("AytR"),c=o("tk/3");let d=(()=>{class t{constructor(t){this.http=t,this.url=i.a.url+"estadisticas"}getStats(){return this.http.get(this.url)}}return t.\u0275fac=function(s){return new(s||t)(n.Xb(c.b))},t.\u0275prov=n.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=o("I5S5"),l=o("ofXK");function h(t,s){if(1&t&&n.Ob(0,"p-chart",9),2&t){const t=n.dc();n.jc("data",t.data3)("options",t.options)}}function p(t,s){1&t&&n.Gc(0," No existen gastos para generar estad\xedsticas ")}const u=[{path:"",component:(()=>{class t{constructor(t,s){this.monthService=t,this.statsService=s,this.colors=["#6D960E","#C9A452","#95280E","#7A15C6","#5DC25B","#599BA5","#6B552B"],this.colorIndex=0,this.options={responsive:!1,maintainAspectRatio:!1}}ngOnInit(){this.statsService.getStats().subscribe(t=>{this.calculateStatsByMonthAndYear(t.pagosmes,t.ingresosmes),this.data2={labels:["Ganancias","Gastos"],datasets:[{data:[t.ingresos,t.pagos],backgroundColor:["#FF6384","#9CCC65"],hoverBackgroundColor:["#FF6384","#9CCC65"]}]},this.calculateStatsExpenses(t.gastos)})}calculateStatsByMonthAndYear(t,s){const o=[],a=[];for(let e=1;e<=12;e++){const n=t.find(t=>t.mes===e);o.push(n?n.total:0);const r=s.find(t=>t.mes===e);a.push(r?r.total:0)}this.data={labels:this.monthService.getMonths().map(t=>t.name),datasets:[{label:"Gastos",backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:o},{label:"Ingresos",backgroundColor:"#9CCC65",borderColor:"#7CB342",data:a}]}}calculateStatsExpenses(t){const s=[],o=[],a=[],e=[];for(let n of t){s.push(n.nombre),o.push(n.total);const t=this.getRandomColor();a.push(t),e.push(t)}this.data3={labels:s,datasets:[{data:o,backgroundColor:a,hoverBackgroundColor:e}]}}getRandomColor(){const t=this.colors[this.colorIndex];return this.colorIndex===this.colors.length-1?this.colorIndex=0:this.colorIndex++,t}}return t.\u0275fac=function(s){return new(s||t)(n.Nb(r.a),n.Nb(d))},t.\u0275cmp=n.Hb({type:t,selectors:[["app-stats"]],decls:28,vars:6,consts:[[1,"wrapper"],[1,"row"],[1,"col-12"],[1,"row","mt-3"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],["type","bar","width","300","height","300",3,"data","options"],[1,"col-12","col-md-6"],["type","doughnut","width","300","height","300",3,"data","options"],["type","doughnut","width","300","height","300",3,"data","options",4,"ngIf","ngIfElse"],["noExpenses",""]],template:function(t,s){if(1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"h1"),n.Gc(4,"Estad\xedsticas"),n.Sb(),n.Sb(),n.Sb(),n.Ob(5,"hr"),n.Tb(6,"div",3),n.Tb(7,"div",2),n.Tb(8,"div",4),n.Tb(9,"div",5),n.Gc(10," Ingresos y pagos por mes del a\xf1o actual "),n.Sb(),n.Tb(11,"div",6),n.Ob(12,"p-chart",7),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(13,"div",3),n.Tb(14,"div",8),n.Tb(15,"div",4),n.Tb(16,"div",5),n.Gc(17," Ganancias/Gastos "),n.Sb(),n.Tb(18,"div",6),n.Ob(19,"p-chart",9),n.Sb(),n.Sb(),n.Sb(),n.Tb(20,"div",8),n.Tb(21,"div",4),n.Tb(22,"div",5),n.Gc(23," Gastos "),n.Sb(),n.Tb(24,"div",6),n.Ec(25,h,1,2,"p-chart",10),n.Ec(26,p,1,0,"ng-template",null,11,n.Fc),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&t){const t=n.uc(27);n.Bb(12),n.jc("data",s.data)("options",s.options),n.Bb(7),n.jc("data",s.data2)("options",s.options),n.Bb(6),n.jc("ngIf",s.data3.labels.length>0)("ngIfElse",t)}},directives:[b.b,l.k],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({factory:function(s){return new(s||t)},imports:[[e.e.forChild(u)],e.e]}),t})();o.d(s,"StatsModule",(function(){return v}));let v=(()=>{class t{}return t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({factory:function(s){return new(s||t)},imports:[[a.a,b.a,g]]}),t})()}}]);