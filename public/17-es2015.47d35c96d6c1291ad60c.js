(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{Pvsk:function(t,s,a){"use strict";a.r(s);var o=a("PCNd"),n=a("tyNb"),e=a("fXoL"),r=a("qan5"),c=a("AytR"),i=a("tk/3");let d=(()=>{class t{constructor(t){this.http=t,this.url=c.a.url+"estadisticas"}getStats(){return this.http.get(this.url)}}return t.\u0275fac=function(s){return new(s||t)(e.Xb(i.b))},t.\u0275prov=e.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=a("ofXK"),b=a("I5S5");function h(t,s){if(1&t&&e.Ob(0,"p-chart",13),2&t){const t=e.dc();e.jc("data",t.data)("options",t.options)}}function p(t,s){1&t&&e.Gc(0," No existen pagos ni ingresos en el a\xf1o actual para generar estad\xedsticas ")}function u(t,s){if(1&t&&e.Ob(0,"p-chart",14),2&t){const t=e.dc();e.jc("data",t.data2)("options",t.options)}}function g(t,s){1&t&&e.Gc(0," No existen pagos ni ingresos para generar estad\xedsticas ")}function f(t,s){if(1&t&&e.Ob(0,"p-chart",14),2&t){const t=e.dc();e.jc("data",t.data3)("options",t.options)}}function v(t,s){1&t&&e.Gc(0," No existen gastos para generar estad\xedsticas ")}const S=[{path:"",component:(()=>{class t{constructor(t,s){this.monthService=t,this.statsService=s,this.colors=["#6D960E","#C9A452","#95280E","#7A15C6","#5DC25B","#599BA5","#6B552B"],this.colorIndex=0,this.options={responsive:!1,maintainAspectRatio:!1}}ngOnInit(){this.statsService.getStats().subscribe(t=>{this.calculateStatsByMonthAndYear(t.pagosmes,t.ingresosmes),this.data2=0!==t.ingresos&&0!==t.pagos?{labels:["Ganancias","Gastos"],datasets:[{data:[t.ingresos,t.pagos],backgroundColor:["#FF6384","#9CCC65"],hoverBackgroundColor:["#FF6384","#9CCC65"]}]}:null,this.calculateStatsExpenses(t.gastos)})}calculateStatsByMonthAndYear(t,s){if(t.length>0||s.length>0){const a=[],o=[];for(let n=1;n<=12;n++){const e=t.find(t=>t.mes===n);a.push(e?e.total:0);const r=s.find(t=>t.mes===n);o.push(r?r.total:0)}this.data={labels:this.monthService.getMonths().map(t=>t.name),datasets:[{label:"Gastos",backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:a},{label:"Ingresos",backgroundColor:"#9CCC65",borderColor:"#7CB342",data:o}]}}else this.data=null}calculateStatsExpenses(t){const s=[],a=[],o=[],n=[];for(let e of t){s.push(e.nombre),a.push(e.total);const t=this.getRandomColor();o.push(t),n.push(t)}this.data3={labels:s,datasets:[{data:a,backgroundColor:o,hoverBackgroundColor:n}]}}getRandomColor(){const t=this.colors[this.colorIndex];return this.colorIndex===this.colors.length-1?this.colorIndex=0:this.colorIndex++,t}}return t.\u0275fac=function(s){return new(s||t)(e.Nb(r.a),e.Nb(d))},t.\u0275cmp=e.Hb({type:t,selectors:[["app-stats"]],decls:32,vars:6,consts:[[1,"wrapper"],[1,"row"],[1,"col-12"],[1,"row","mt-3"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],["type","bar","width","300","height","300",3,"data","options",4,"ngIf","ngIfElse"],["noActualYear",""],[1,"col-12","col-md-6"],["type","doughnut","width","300","height","300",3,"data","options",4,"ngIf","ngIfElse"],["noExpensesAndProfits",""],["noExpenses",""],["type","bar","width","300","height","300",3,"data","options"],["type","doughnut","width","300","height","300",3,"data","options"]],template:function(t,s){if(1&t&&(e.Tb(0,"div",0),e.Tb(1,"div",1),e.Tb(2,"div",2),e.Tb(3,"h1"),e.Gc(4,"Estad\xedsticas"),e.Sb(),e.Sb(),e.Sb(),e.Ob(5,"hr"),e.Tb(6,"div",3),e.Tb(7,"div",2),e.Tb(8,"div",4),e.Tb(9,"div",5),e.Gc(10," Ingresos y pagos por mes del a\xf1o actual "),e.Sb(),e.Tb(11,"div",6),e.Ec(12,h,1,2,"p-chart",7),e.Ec(13,p,1,0,"ng-template",null,8,e.Fc),e.Sb(),e.Sb(),e.Sb(),e.Sb(),e.Tb(15,"div",3),e.Tb(16,"div",9),e.Tb(17,"div",4),e.Tb(18,"div",5),e.Gc(19," Ganancias/Gastos "),e.Sb(),e.Tb(20,"div",6),e.Ec(21,u,1,2,"p-chart",10),e.Ec(22,g,1,0,"ng-template",null,11,e.Fc),e.Sb(),e.Sb(),e.Sb(),e.Tb(24,"div",9),e.Tb(25,"div",4),e.Tb(26,"div",5),e.Gc(27," Gastos con mayor dinero invertido "),e.Sb(),e.Tb(28,"div",6),e.Ec(29,f,1,2,"p-chart",10),e.Ec(30,v,1,0,"ng-template",null,12,e.Fc),e.Sb(),e.Sb(),e.Sb(),e.Sb(),e.Sb()),2&t){const t=e.uc(14),a=e.uc(23),o=e.uc(31);e.Bb(12),e.jc("ngIf",s.data)("ngIfElse",t),e.Bb(9),e.jc("ngIf",s.data2)("ngIfElse",a),e.Bb(8),e.jc("ngIf",(null==s.data3?null:s.data3.labels.length)>0)("ngIfElse",o)}},directives:[l.k,b.b],styles:[""]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=e.Lb({type:t}),t.\u0275inj=e.Kb({factory:function(s){return new(s||t)},imports:[[n.e.forChild(S)],n.e]}),t})();a.d(s,"StatsModule",(function(){return C}));let C=(()=>{class t{}return t.\u0275mod=e.Lb({type:t}),t.\u0275inj=e.Kb({factory:function(s){return new(s||t)},imports:[[o.a,b.a,m]]}),t})()}}]);