(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{lRme:function(e,r,t){"use strict";t.r(r);var o=t("PCNd"),a=t("tyNb"),i=t("3Pt+"),c=t("fXoL"),n=t("3iQZ"),s=t("7zfz"),b=t("ofXK"),d=t("rEr+"),l=t("jIHw");function p(e,r){if(1&e&&c.Ob(0,"p-sortIcon",23),2&e){const e=c.dc().$implicit;c.jc("field",e.field)}}function u(e,r){if(1&e&&(c.Tb(0,"th",21),c.Gc(1),c.Ec(2,p,1,1,"p-sortIcon",22),c.Sb()),2&e){const e=r.$implicit;c.jc("pSortableColumn",e.field),c.Bb(1),c.Ic(" ",e.header," "),c.Bb(1),c.jc("ngIf",e.sortOrder)}}function m(e,r){if(1&e&&(c.Tb(0,"tr"),c.Ec(1,u,3,3,"th",20),c.Sb()),2&e){const e=r.$implicit;c.Bb(1),c.jc("ngForOf",e)}}function f(e,r){if(1&e){const e=c.Ub();c.Tb(0,"tr",24),c.Tb(1,"td"),c.Tb(2,"span",25),c.Gc(3,"Palabra clave"),c.Sb(),c.Gc(4),c.Sb(),c.Tb(5,"td"),c.Tb(6,"span",25),c.Gc(7,"Porcentaje"),c.Sb(),c.Gc(8),c.Sb(),c.Tb(9,"td"),c.Tb(10,"span",25),c.Gc(11,"Creado/Actualizado por"),c.Sb(),c.Gc(12),c.Sb(),c.Tb(13,"td"),c.Tb(14,"button",26),c.bc("click",(function(){c.wc(e);const t=r.$implicit;return c.dc().onRowSelect(t.id)})),c.Tb(15,"span"),c.Ob(16,"i",27),c.Sb(),c.Sb(),c.Tb(17,"button",26),c.bc("click",(function(){c.wc(e);const t=r.$implicit;return c.dc().confirm(t.id)})),c.Tb(18,"span"),c.Ob(19,"i",28),c.Sb(),c.Sb(),c.Sb(),c.Sb()}if(2&e){const e=r.$implicit;c.jc("pSelectableRow",e),c.Bb(4),c.Ic(" ",e.palabra_clave," "),c.Bb(4),c.Ic(" ",e.porcentaje," "),c.Bb(4),c.Ic(" ",e.id_usuario.nombre," ")}}function v(e,r){if(1&e){const e=c.Ub();c.Tb(0,"div",29),c.Tb(1,"button",30),c.bc("click",(function(){return c.wc(e),c.dc().add()})),c.Sb(),c.Sb()}}const g=function(e,r){return{"fa-search":e,"fa-spinner fa-spin":r}};let h=(()=>{class e{constructor(e,r,t,o,a){this.goodPracticeService=e,this.formBuilder=r,this.messageService=t,this.confirmationService=o,this.router=a,this.cols=[{field:"palabra_clave",header:"Palabra clave",sortOrder:!0},{field:"porcentaje",header:"Porcentaje",sortOrder:!0},{field:"user",header:"Creado/Actualizado por",sortOrder:!0},{field:"",header:"Opciones",sortOrder:!1}]}ngOnInit(){this.buildForm()}buildForm(){this.form=this.formBuilder.group({palabraClave:new i.c(""),porcentaje:new i.c("")})}add(){this.router.navigate(["/home/good-practices/new"])}search(e,r,t){Promise.resolve().then(()=>this.loading=!0),this.goodPracticeService.get(this.form.value,e,r,t).subscribe(e=>{this.goodPractices=e.data.data,this.totalRecords=e.data.total,this.loading=!1},()=>{this.loading=!1})}customSort(e){this.search(e.sortField,e.sortOrder,e.first/e.rows+1)}confirm(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de que deseas borrar?",header:"Confirmaci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.delete(e)}})}delete(e){this.goodPracticeService.delete(e).subscribe(r=>{this.goodPractices=this.goodPractices.filter(r=>r.id!==e),this.messageService.add({severity:"success",summary:"\xc9xito",detail:r.message})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})})}onRowSelect(e){this.router.navigate(["/home/good-practices/"+e])}}return e.\u0275fac=function(r){return new(r||e)(c.Nb(n.a),c.Nb(i.b),c.Nb(s.d),c.Nb(s.a),c.Nb(a.b))},e.\u0275cmp=c.Hb({type:e,selectors:[["app-good-practice"]],decls:38,vars:13,consts:[[1,"wrapper"],[1,"row"],[1,"col-12"],[1,"card","mt-3"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],[3,"formGroup"],[1,"col-12","col-md-6","form-group"],["for","palabraClave"],["type","text","id","palabraClave","formControlName","palabraClave",1,"form-control","form-control-user"],["for","porcentaje"],["type","text","id","porcentaje","formControlName","porcentaje",1,"form-control","form-control-user"],[1,"row","mt-1"],[1,"col-12","text-right","mt-2"],["type","button",1,"btn","btn-primary","mr-1",3,"disabled","click"],["aria-hidden","true",1,"fas",3,"ngClass"],[3,"columns","value","paginator","rows","responsive","lazy","totalRecords","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],[1,"ui-column-title"],["type","button",1,"btn","btn-secondary","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-edit"],["aria-hidden","true",1,"fas","fa-trash"],[2,"text-align","left"],["type","button","pButton","","icon","pi pi-plus","label","A\xf1adir",3,"click"]],template:function(e,r){1&e&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"h1"),c.Gc(4,"Buenas pr\xe1cticas"),c.Sb(),c.Sb(),c.Sb(),c.Ob(5,"hr"),c.Tb(6,"div",3),c.Tb(7,"div",4),c.Gc(8," Buscador de buenas pr\xe1cticas "),c.Sb(),c.Tb(9,"div",5),c.Tb(10,"div",1),c.Tb(11,"div",2),c.Tb(12,"form",6),c.Tb(13,"div",1),c.Tb(14,"div",7),c.Tb(15,"label",8),c.Gc(16,"Palabra clave"),c.Sb(),c.Ob(17,"input",9),c.Sb(),c.Tb(18,"div",7),c.Tb(19,"label",10),c.Gc(20,"Porcentaje"),c.Sb(),c.Ob(21,"input",11),c.Sb(),c.Sb(),c.Tb(22,"div",12),c.Tb(23,"div",13),c.Tb(24,"button",14),c.bc("click",(function(){return r.search()})),c.Ob(25,"i",15),c.Tb(26,"span"),c.Gc(27," Buscar"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(28,"div",3),c.Tb(29,"div",4),c.Gc(30," Listado de buenas pr\xe1cticas "),c.Sb(),c.Tb(31,"div",5),c.Tb(32,"div",1),c.Tb(33,"div",2),c.Tb(34,"p-table",16),c.bc("onLazyLoad",(function(e){return r.customSort(e)})),c.Ec(35,m,2,1,"ng-template",17),c.Ec(36,f,20,4,"ng-template",18),c.Ec(37,v,2,0,"ng-template",19),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.Bb(12),c.jc("formGroup",r.form),c.Bb(12),c.jc("disabled",r.loading),c.Bb(1),c.jc("ngClass",c.nc(10,g,!r.loading,r.loading)),c.Bb(9),c.jc("columns",r.cols)("value",r.goodPractices)("paginator",!0)("rows",10)("responsive",!0)("lazy",!0)("totalRecords",r.totalRecords))},directives:[i.o,i.i,i.e,i.a,i.h,i.d,b.i,d.d,s.e,b.j,d.c,b.k,d.b,d.a,l.a],styles:[""]}),e})();class S{}var T=t("wMtC"),j=t("Gxio");function y(e,r){1&e&&(c.Tb(0,"div",1),c.Ob(1,"img",9),c.Sb())}function w(e,r){1&e&&(c.Tb(0,"div"),c.Gc(1," La palabra clave es obligatoria "),c.Sb())}function P(e,r){1&e&&(c.Tb(0,"div"),c.Gc(1," Los apellidos no pueden ser vac\xedos "),c.Sb())}function G(e,r){if(1&e&&(c.Tb(0,"div",24),c.Ec(1,w,2,0,"div",23),c.Ec(2,P,2,0,"div",23),c.Sb()),2&e){const e=c.dc(2);c.Bb(1),c.jc("ngIf",e.form.controls.palabra_clave.errors.required),c.Bb(1),c.jc("ngIf",e.form.controls.palabra_clave.errors.whitespace)}}function B(e,r){1&e&&(c.Tb(0,"div"),c.Gc(1," El porcentaje es obligatorio "),c.Sb())}function O(e,r){1&e&&(c.Tb(0,"div"),c.Gc(1," El porcentaje m\xednimo es 1 "),c.Sb())}function E(e,r){1&e&&(c.Tb(0,"div"),c.Gc(1," El porcentaje m\xe1ximo es 100 "),c.Sb())}function I(e,r){if(1&e&&(c.Tb(0,"div",24),c.Ec(1,B,2,0,"div",23),c.Ec(2,O,2,0,"div",23),c.Ec(3,E,2,0,"div",23),c.Sb()),2&e){const e=c.dc(2);c.Bb(1),c.jc("ngIf",e.form.controls.porcentaje.errors.required),c.Bb(1),c.jc("ngIf",e.form.controls.porcentaje.errors.min),c.Bb(1),c.jc("ngIf",e.form.controls.porcentaje.errors.max)}}const C=function(e,r){return{"fa-save":e,"fa-spinner fa-spin":r}};function k(e,r){if(1&e&&(c.Tb(0,"span"),c.Ob(1,"i",25),c.Gc(2," Guardar"),c.Sb()),2&e){const e=c.dc(2);c.Bb(1),c.jc("ngClass",c.nc(1,C,!e.loading,e.loading))}}const x=function(e,r){return{"fa-edit":e,"fa-spinner fa-spin":r}};function N(e,r){if(1&e&&(c.Tb(0,"span"),c.Ob(1,"i",25),c.Gc(2," Editar"),c.Sb()),2&e){const e=c.dc(2);c.Bb(1),c.jc("ngClass",c.nc(1,x,!e.loading,e.loading))}}function _(e,r){if(1&e){const e=c.Ub();c.Tb(0,"div",10),c.Tb(1,"div",11),c.Gc(2," Dise\xf1ador tipo de gasto "),c.Sb(),c.Tb(3,"div",12),c.Tb(4,"div",1),c.Tb(5,"div",2),c.Tb(6,"form",13),c.Tb(7,"div",1),c.Tb(8,"div",14),c.Tb(9,"label",15),c.Gc(10,"Palabra clave"),c.Sb(),c.Ob(11,"input",16),c.Ec(12,G,3,2,"div",17),c.Sb(),c.Tb(13,"div",14),c.Tb(14,"label",18),c.Gc(15,"Porcentaje"),c.Sb(),c.Ob(16,"input",19),c.Ec(17,I,4,3,"div",17),c.Sb(),c.Sb(),c.Tb(18,"div",20),c.Tb(19,"div",21),c.Tb(20,"button",22),c.bc("click",(function(){return c.wc(e),c.dc().save()})),c.Ec(21,k,3,4,"span",23),c.Ec(22,N,3,4,"span",23),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()}if(2&e){const e=c.dc();c.Bb(6),c.jc("formGroup",e.form),c.Bb(6),c.jc("ngIf",e.form.controls.palabra_clave.invalid&&(e.form.controls.palabra_clave.dirty||e.form.controls.palabra_clave.touched)),c.Bb(5),c.jc("ngIf",e.form.controls.porcentaje.invalid&&(e.form.controls.porcentaje.dirty||e.form.controls.porcentaje.touched)),c.Bb(3),c.jc("disabled",e.form.pristine||e.form.invalid||e.loading),c.Bb(1),c.jc("ngIf",e.newGoodPractice),c.Bb(1),c.jc("ngIf",!e.newGoodPractice)}}const R=function(){return{marginTop:"80px"}},L=[{path:"",component:h},{path:":id",component:(()=>{class e{constructor(e,r,t,o,a){this.activatedRoute=e,this.goodPracticeService=r,this.formBuilder=t,this.location=o,this.messageService=a}ngOnInit(){this.newGoodPractice="new"===this.activatedRoute.snapshot.params.id,this.newGoodPractice?(this.goodPractice=new S,this.buildForm()):(Promise.resolve().then(()=>this.loading=!0),this.goodPracticeService.find(this.activatedRoute.snapshot.params.id).subscribe(e=>{this.goodPractice=e.data,this.loading=!1,this.buildForm()},e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}buildForm(){this.form=this.formBuilder.group({palabra_clave:new i.c(this.goodPractice.palabra_clave,[i.n.required,T.a]),porcentaje:new i.c(this.goodPractice.porcentaje,[i.n.required,i.n.max(100),i.n.min(0)])})}save(){if(Promise.resolve().then(()=>this.loading=!0),this.goodPractice.id)this.goodPractice.palabra_clave=this.form.get("palabra_clave").value,this.goodPractice.porcentaje=this.form.get("porcentaje").value,this.goodPracticeService.update(this.goodPractice).subscribe(e=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.loading=!1,this.back()},e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})});else{const e=Object.assign({},this.form.value);this.goodPracticeService.add(e).subscribe(e=>{this.loading=!1,this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.back()},e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})})}}back(){this.location.back()}}return e.\u0275fac=function(r){return new(r||e)(c.Nb(a.a),c.Nb(n.a),c.Nb(i.b),c.Nb(b.g),c.Nb(s.d))},e.\u0275cmp=c.Hb({type:e,selectors:[["app-good-practice-detail"]],decls:15,vars:5,consts:[[1,"wrapper"],[1,"row"],[1,"col-12"],["class","row",4,"ngIf"],["class","card",4,"ngIf"],[1,"row","mt-3"],[1,"col-12","text-right"],["type","button",1,"btn","btn-secondary","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-arrow-left"],["src","./assets/notfound.png","alt","No existen resultados",1,"d-block","mx-auto","img-not-found"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],[3,"formGroup"],[1,"col-12","col-md-6","form-group"],["for","palabra_clave"],["type","text","id","palabra_clave","formControlName","palabra_clave",1,"form-control","form-control-user"],["class","alert alert-danger mt-1",4,"ngIf"],["for","porcentaje"],["type","number","id","porcentaje","formControlName","porcentaje",1,"form-control","form-control-user"],[1,"row","mt-1"],[1,"col-12","text-right","mt-2"],["type","button",1,"btn","btn-primary","mr-1",3,"disabled","click"],[4,"ngIf"],[1,"alert","alert-danger","mt-1"],["aria-hidden","true",1,"fas",3,"ngClass"]],template:function(e,r){1&e&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"h1"),c.Gc(4,"Detalle usuario"),c.Sb(),c.Sb(),c.Sb(),c.Ob(5,"hr"),c.Ec(6,y,2,0,"div",3),c.Ec(7,_,23,6,"div",4),c.Tb(8,"div",5),c.Tb(9,"div",6),c.Tb(10,"button",7),c.bc("click",(function(){return r.back()})),c.Tb(11,"span"),c.Ob(12,"i",8),c.Gc(13," Volver"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Ob(14,"p-toast")),2&e&&(c.Bb(6),c.jc("ngIf",!r.goodPractice&&!r.loading),c.Bb(1),c.jc("ngIf",r.goodPractice),c.Bb(7),c.Cc(c.lc(4,R)))},directives:[b.k,j.a,i.o,i.i,i.e,i.a,i.h,i.d,i.k,b.i],styles:[""]}),e})()}];let F=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(r){return new(r||e)},imports:[[a.e.forChild(L)],a.e]}),e})();t.d(r,"GoodPracticeModule",(function(){return z}));let z=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(r){return new(r||e)},imports:[[o.a,F]]}),e})()}}]);