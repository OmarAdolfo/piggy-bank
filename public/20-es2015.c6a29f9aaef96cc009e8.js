(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"1v3h":function(i,t,e){"use strict";e.r(t);var r=e("PCNd"),o=e("tyNb"),c=e("3Pt+"),s=e("fXoL"),n=e("eHJY"),a=e("7zfz"),b=e("TTF2"),d=e("ofXK"),l=e("rEr+"),f=e("jIHw");function p(i,t){if(1&i&&s.Pb(0,"p-sortIcon",22),2&i){const i=s.ec().$implicit;s.kc("field",i.field)}}function u(i,t){if(1&i&&(s.Ub(0,"th",20),s.Hc(1),s.Fc(2,p,1,1,"p-sortIcon",21),s.Tb()),2&i){const i=t.$implicit;s.kc("pSortableColumn",i.field),s.Cb(1),s.Jc(" ",i.header," "),s.Cb(1),s.kc("ngIf",i.sortOrder)}}function m(i,t){if(1&i&&(s.Ub(0,"tr"),s.Fc(1,u,3,3,"th",19),s.Tb()),2&i){const i=t.$implicit;s.Cb(1),s.kc("ngForOf",i)}}function v(i,t){if(1&i){const i=s.Vb();s.Ub(0,"button",26),s.cc("click",(function(){s.xc(i);const t=s.ec().$implicit;return s.ec().onRowSelect(t.id)})),s.Ub(1,"span"),s.Pb(2,"i",27),s.Tb(),s.Tb()}}function h(i,t){if(1&i){const i=s.Vb();s.Ub(0,"button",26),s.cc("click",(function(){s.xc(i);const t=s.ec().$implicit;return s.ec().confirm(t.id)})),s.Ub(1,"span"),s.Pb(2,"i",28),s.Tb(),s.Tb()}}function g(i,t){if(1&i&&(s.Ub(0,"tr",23),s.Ub(1,"td"),s.Ub(2,"span",24),s.Hc(3,"Valor"),s.Tb(),s.Hc(4),s.Tb(),s.Ub(5,"td"),s.Ub(6,"span",24),s.Hc(7,"Descripci\xf3n"),s.Tb(),s.Hc(8),s.Tb(),s.Ub(9,"td"),s.Fc(10,v,3,0,"button",25),s.Fc(11,h,3,0,"button",25),s.Tb(),s.Tb()),2&i){const i=t.$implicit,e=s.ec();s.kc("pSelectableRow",i),s.Cb(4),s.Jc(" ",i.valor," "),s.Cb(4),s.Jc(" ",i.descripcion," "),s.Cb(2),s.kc("ngIf",e.checkProperty(i.id_usuario)),s.Cb(1),s.kc("ngIf",e.checkProperty(i.id_usuario))}}function y(i,t){if(1&i){const i=s.Vb();s.Ub(0,"div",29),s.Ub(1,"button",30),s.cc("click",(function(){return s.xc(i),s.ec().add()})),s.Tb(),s.Tb()}}const T=function(i,t){return{"fa-search":i,"fa-spinner fa-spin":t}};let U=(()=>{class i{constructor(i,t,e,r,o,c){this.typeProfitService=i,this.formBuilder=t,this.messageService=e,this.router=r,this.confirmationService=o,this.authenticationService=c,this.cols=[{field:"valor",header:"Valor",sortOrder:!0},{field:"descripcion",header:"Descripci\xf3n",sortOrder:!0},{field:"",header:"Opciones",sortOrder:!1}]}ngOnInit(){this.buildForm()}buildForm(){this.form=this.formBuilder.group({valor:new c.c("",c.n.required),descripcion:new c.c("")})}add(){this.router.navigate(["/home/type-profit/new"])}search(i,t,e){Promise.resolve().then(()=>this.loading=!0),this.typeProfitService.get(this.form.value,i,t,e).subscribe(i=>{this.typesProfit=i.data.data,this.totalRecords=i.data.total,this.loading=!1},()=>{this.loading=!1})}customSort(i){this.search(i.sortField,i.sortOrder,i.first/i.rows+1)}confirm(i){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de que deseas borrar?",header:"Confirmaci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.delete(i)}})}delete(i){this.typeProfitService.delete(i).subscribe(t=>{this.typesProfit=this.typesProfit.filter(t=>t.id!==i),this.messageService.add({severity:"success",summary:"\xc9xito",detail:t.message})},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.error.message})})}onRowSelect(i){this.router.navigate(["/home/type-profit/"+i])}checkProperty(i){return i===parseInt(this.authenticationService.getSub())}}return i.\u0275fac=function(t){return new(t||i)(s.Ob(n.a),s.Ob(c.b),s.Ob(a.d),s.Ob(o.b),s.Ob(a.a),s.Ob(b.a))},i.\u0275cmp=s.Ib({type:i,selectors:[["app-type-profit"]],decls:37,vars:13,consts:[[1,"wrapper"],[1,"row"],[1,"col-12"],[1,"card","mt-3"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],[3,"formGroup"],[1,"col-12","col-md-6","form-group"],["for","valor"],["type","valor","id","valor","formControlName","valor",1,"form-control","form-control-user"],["for","descripcion"],["type","descripcion","id","descripcion","formControlName","descripcion",1,"form-control","form-control-user"],[1,"col-12","text-right","mt-2"],["type","button",1,"btn","btn-primary","mr-1",3,"disabled","click"],["aria-hidden","true",1,"fas",3,"ngClass"],[3,"columns","value","paginator","rows","responsive","lazy","totalRecords","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],[1,"ui-column-title"],["type","button","class","btn btn-secondary mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-edit"],["aria-hidden","true",1,"fas","fa-trash"],[2,"text-align","left"],["type","button","pButton","","icon","pi pi-plus","label","A\xf1adir",3,"click"]],template:function(i,t){1&i&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"div",2),s.Ub(3,"h1"),s.Hc(4,"Tipos de ganancias"),s.Tb(),s.Tb(),s.Tb(),s.Pb(5,"hr"),s.Ub(6,"div",3),s.Ub(7,"div",4),s.Hc(8," Buscador de tipos de ganancias "),s.Tb(),s.Ub(9,"div",5),s.Ub(10,"div",1),s.Ub(11,"div",2),s.Ub(12,"form",6),s.Ub(13,"div",1),s.Ub(14,"div",7),s.Ub(15,"label",8),s.Hc(16,"Valor"),s.Tb(),s.Pb(17,"input",9),s.Tb(),s.Ub(18,"div",7),s.Ub(19,"label",10),s.Hc(20,"Descripci\xf3n"),s.Tb(),s.Pb(21,"input",11),s.Tb(),s.Ub(22,"div",12),s.Ub(23,"button",13),s.cc("click",(function(){return t.search()})),s.Pb(24,"i",14),s.Ub(25,"span"),s.Hc(26," Buscar"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(27,"div",3),s.Ub(28,"div",4),s.Hc(29," Listado de tipos de ganancias "),s.Tb(),s.Ub(30,"div",5),s.Ub(31,"div",1),s.Ub(32,"div",2),s.Ub(33,"p-table",15),s.cc("onLazyLoad",(function(i){return t.customSort(i)})),s.Fc(34,m,2,1,"ng-template",16),s.Fc(35,g,12,5,"ng-template",17),s.Fc(36,y,2,0,"ng-template",18),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&i&&(s.Cb(12),s.kc("formGroup",t.form),s.Cb(11),s.kc("disabled",t.loading),s.Cb(1),s.kc("ngClass",s.oc(10,T,!t.loading,t.loading)),s.Cb(9),s.kc("columns",t.cols)("value",t.typesProfit)("paginator",!0)("rows",10)("responsive",!0)("lazy",!0)("totalRecords",t.totalRecords))},directives:[c.o,c.i,c.e,c.a,c.h,c.d,d.i,l.d,a.e,d.j,l.c,d.k,l.b,l.a,f.a],styles:[""]}),i})();class k{}var P=e("wMtC"),w=e("Gxio");function C(i,t){1&i&&(s.Ub(0,"div",1),s.Pb(1,"img",9),s.Tb())}function S(i,t){1&i&&(s.Ub(0,"div"),s.Hc(1," El valor es obligatorio "),s.Tb())}function F(i,t){1&i&&(s.Ub(0,"div"),s.Hc(1," El valor no puede ser vac\xedo "),s.Tb())}function I(i,t){if(1&i&&(s.Ub(0,"div",24),s.Fc(1,S,2,0,"div",23),s.Fc(2,F,2,0,"div",23),s.Tb()),2&i){const i=s.ec(2);s.Cb(1),s.kc("ngIf",i.form.controls.valor.errors.required),s.Cb(1),s.kc("ngIf",i.form.controls.valor.errors.whitespace)}}function H(i,t){1&i&&(s.Ub(0,"div"),s.Hc(1," La descripci\xf3n es obligatoria "),s.Tb())}function O(i,t){1&i&&(s.Ub(0,"div"),s.Hc(1," La descripci\xf3n no puede ser vac\xeda "),s.Tb())}function x(i,t){if(1&i&&(s.Ub(0,"div",24),s.Fc(1,H,2,0,"div",23),s.Fc(2,O,2,0,"div",23),s.Tb()),2&i){const i=s.ec(2);s.Cb(1),s.kc("ngIf",i.form.controls.descripcion.errors.required),s.Cb(1),s.kc("ngIf",i.form.controls.descripcion.errors.whitespace)}}const R=function(i,t){return{"fa-save":i,"fa-spinner fa-spin":t}};function L(i,t){if(1&i&&(s.Ub(0,"span"),s.Pb(1,"i",25),s.Hc(2," Guardar"),s.Tb()),2&i){const i=s.ec(2);s.Cb(1),s.kc("ngClass",s.oc(1,R,!i.loading,i.loading))}}const E=function(i,t){return{"fa-edit":i,"fa-spinner fa-spin":t}};function V(i,t){if(1&i&&(s.Ub(0,"span"),s.Pb(1,"i",25),s.Hc(2," Editar"),s.Tb()),2&i){const i=s.ec(2);s.Cb(1),s.kc("ngClass",s.oc(1,E,!i.loading,i.loading))}}function B(i,t){if(1&i){const i=s.Vb();s.Ub(0,"div",10),s.Ub(1,"div",11),s.Hc(2," Dise\xf1ador tipo de gasto "),s.Tb(),s.Ub(3,"div",12),s.Ub(4,"div",1),s.Ub(5,"div",2),s.Ub(6,"form",13),s.Ub(7,"div",1),s.Ub(8,"div",14),s.Ub(9,"label",15),s.Hc(10,"Valor"),s.Tb(),s.Pb(11,"input",16),s.Fc(12,I,3,2,"div",17),s.Tb(),s.Ub(13,"div",14),s.Ub(14,"label",18),s.Hc(15,"Descripci\xf3n"),s.Tb(),s.Pb(16,"input",19),s.Fc(17,x,3,2,"div",17),s.Tb(),s.Tb(),s.Ub(18,"div",20),s.Ub(19,"div",21),s.Ub(20,"button",22),s.cc("click",(function(){return s.xc(i),s.ec().save()})),s.Fc(21,L,3,4,"span",23),s.Fc(22,V,3,4,"span",23),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&i){const i=s.ec();s.Cb(6),s.kc("formGroup",i.form),s.Cb(6),s.kc("ngIf",i.form.controls.valor.invalid&&(i.form.controls.valor.dirty||i.form.controls.valor.touched)),s.Cb(5),s.kc("ngIf",i.form.controls.descripcion.invalid&&(i.form.controls.descripcion.dirty||i.form.controls.descripcion.touched)),s.Cb(3),s.kc("disabled",i.form.pristine||i.form.invalid||i.loading),s.Cb(1),s.kc("ngIf",i.newTypeProfit),s.Cb(1),s.kc("ngIf",!i.newTypeProfit)}}const D=function(){return{marginTop:"80px"}},N=[{path:"",component:U},{path:":id",component:(()=>{class i{constructor(i,t,e,r,o){this.typeProfitService=i,this.activatedRoute=t,this.formBuilder=e,this.location=r,this.messageService=o}ngOnInit(){this.newTypeProfit="new"===this.activatedRoute.snapshot.params.id,this.newTypeProfit?(this.typeProfit=new k,this.buildForm()):(Promise.resolve().then(()=>this.loading=!0),this.typeProfitService.find(this.activatedRoute.snapshot.params.id).subscribe(i=>{this.typeProfit=i.data,this.loading=!1,this.buildForm()},i=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:i.error.message})}))}buildForm(){this.form=this.formBuilder.group({valor:new c.c(this.typeProfit.valor,[c.n.required,P.a]),descripcion:new c.c(this.typeProfit.descripcion,[c.n.required,P.a])})}save(){if(Promise.resolve().then(()=>this.loading=!0),this.typeProfit.id)this.typeProfit.valor=this.form.get("valor").value,this.typeProfit.descripcion=this.form.get("descripcion").value,this.typeProfitService.update(this.typeProfit).subscribe(i=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:i.message}),this.loading=!1,this.back()},i=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:i.error.message})});else{const i=Object.assign({},this.form.value);this.typeProfitService.add(i).subscribe(i=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:i.message}),this.loading=!1,this.back()},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.error.message}),this.loading=!1})}}back(){this.location.back()}}return i.\u0275fac=function(t){return new(t||i)(s.Ob(n.a),s.Ob(o.a),s.Ob(c.b),s.Ob(d.g),s.Ob(a.d))},i.\u0275cmp=s.Ib({type:i,selectors:[["app-type-profit-detail"]],decls:15,vars:5,consts:[[1,"wrapper"],[1,"row"],[1,"col-12"],["class","row",4,"ngIf"],["class","card",4,"ngIf"],[1,"row","mt-3"],[1,"col-12","text-right"],["type","button",1,"btn","btn-secondary","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-arrow-left"],["src","./assets/notfound.png","alt","No existen resultados",1,"d-block","mx-auto","img-not-found"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],[3,"formGroup"],[1,"col-12","col-md-6","form-group"],["for","valor"],["type","text","id","valor","formControlName","valor",1,"form-control","form-control-user"],["class","alert alert-danger mt-1",4,"ngIf"],["for","descripcion"],["type","text","id","descripcion","formControlName","descripcion",1,"form-control","form-control-user"],[1,"row","mt-1"],[1,"col-12","text-right","mt-2"],["type","button",1,"btn","btn-primary","mr-1",3,"disabled","click"],[4,"ngIf"],[1,"alert","alert-danger","mt-1"],["aria-hidden","true",1,"fas",3,"ngClass"]],template:function(i,t){1&i&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"div",2),s.Ub(3,"h1"),s.Hc(4,"Detalle usuario"),s.Tb(),s.Tb(),s.Tb(),s.Pb(5,"hr"),s.Fc(6,C,2,0,"div",3),s.Fc(7,B,23,6,"div",4),s.Ub(8,"div",5),s.Ub(9,"div",6),s.Ub(10,"button",7),s.cc("click",(function(){return t.back()})),s.Ub(11,"span"),s.Pb(12,"i",8),s.Hc(13," Volver"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Pb(14,"p-toast")),2&i&&(s.Cb(6),s.kc("ngIf",!t.typeProfit&&!t.loading),s.Cb(1),s.kc("ngIf",t.typeProfit),s.Cb(7),s.Dc(s.mc(4,D)))},directives:[d.k,w.a,c.o,c.i,c.e,c.a,c.h,c.d,d.i],styles:[""]}),i})()}];let q=(()=>{class i{}return i.\u0275mod=s.Mb({type:i}),i.\u0275inj=s.Lb({factory:function(t){return new(t||i)},imports:[[o.e.forChild(N)],o.e]}),i})();e.d(t,"TypeProfitModule",(function(){return z}));let z=(()=>{class i{}return i.\u0275mod=s.Mb({type:i}),i.\u0275inj=s.Lb({factory:function(t){return new(t||i)},imports:[[r.a,q]]}),i})()}}]);